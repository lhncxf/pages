<!DOCTYPE html>
<html lang="{{ site.lang | default: " en-US" }}">

<head>
  <meta charset="UTF-8">

  {% seo %}
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style"
    type="text/css" crossorigin>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  {% include head-custom.html %}
  <style>
    /* 目录 */
    ul {
      padding-left: 2em;
    }

    .preview-content {
      padding-bottom: 1em;
      border-bottom: 1px solid #ccc;
    }

    .main-content h2::after,
    .main-content h3::after,
    .main-content h4::after,
    .main-content h5::after,
    .main-content h6::after {
      font-size: 12px;
      content: '【回到顶部】';
      margin-left: 5px;
      cursor: pointer;
      opacity: 0;
    }

    .main-content h2:hover::after,
    .main-content h3:hover::after,
    .main-content h4:hover::after,
    .main-content h5:hover::after,
    .main-content h6:hover::after {
      opacity: 1;
    }
  </style>
</head>

<body style="user-select: none;">
  <a id="skip-to-content" href="#content">Skip to the content.</a>

  <header class="page-header" role="banner">
    <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
    <h2 class="project-tagline">{{ page.description | default: site.description | default: site.github.project_tagline
      }}</h2>
    <!-- {% if site.github.is_project_page %}
        <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
      {% endif %} -->
    {% unless page.home %}
    <a href="/" class="btn">Back To Index</a>
    {% endunless %}
    {% if site.show_downloads %}
    <a href="{{ site.github.zip_url }}" class="btn">Download .zip</a>
    <a href="{{ site.github.tar_url }}" class="btn">Download .tar.gz</a>
    {% endif %}
  </header>

  <main id="content" class="main-content" role="main">
    {% unless page.home %}
    <div class="preview-content">
      <h2>目录</h2>
      {% include toc.html html=content %}
    </div>
    {% endunless %}
    {{ content }}
    {% if page.home %}
    <footer class="site-footer">
      {% if site.github.is_project_page %}
      <span class="site-footer-owner"><a href="{{ site.github.repository_url }}" target="_blank">{{
          site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}" target="_blank">{{
          site.github.owner_name }}</a>.</span>
      {% endif %}
      <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com"
          target="_blank">GitHub Pages</a>.</span>
    </footer>
    {% endif %}
  </main>
  <script>
    Math.easeInOutQuad = function (t, b, c, d) {
      t /= d / 2
      if (t < 1) {
        return c / 2 * t * t + b
      }
      t--
      return -c / 2 * (t * (t - 2) - 1) + b
    }

    // requestAnimationFrame for Smart Animating http://goo.gl/sx5sts
    var requestAnimFrame = (function () {
      return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) { window.setTimeout(callback, 1000 / 60) }
    })()

    /**
     * Because it's so fucking difficult to detect the scrolling element, just move them all
     * @param {number} amount
     */
    function move(amount) {
      document.documentElement.scrollTop = amount
      document.body.parentNode.scrollTop = amount
      document.body.scrollTop = amount
    }

    function position() {
      return document.documentElement.scrollTop || document.body.parentNode.scrollTop || document.body.scrollTop
    }

    /**
     * @param {number} to
     * @param {number} duration
     * @param {Function} callback
     */
    function scrollTo(to, duration, callback) {
      const start = position()
      const change = to - start
      const increment = 20
      let currentTime = 0
      duration = (typeof (duration) === 'undefined') ? 500 : duration
      var animateScroll = function () {
        // increment the time
        currentTime += increment
        // find the value with the quadratic in-out easing function
        var val = Math.easeInOutQuad(currentTime, start, change, duration)
        // move the document.body
        move(val)
        // do the animation unless its over
        if (currentTime < duration) {
          requestAnimFrame(animateScroll)
        } else {
          if (callback && typeof (callback) === 'function') {
            // the animation is done so lets callback
            callback()
          }
        }
      }
      animateScroll()
    }
  </script>
  <script>
    var elements = document.querySelectorAll('.main-content h2,.main-content h3,.main-content h4,.main-content h5,.main-content h6')
    elements.addEventListner('click', function () {
      scrollTo(0)
    }, false)
  </script>
</body>

</html>